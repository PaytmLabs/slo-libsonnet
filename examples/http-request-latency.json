{
   "alerts": [
      {
         "expr": "prometheus_http_request_duration_seconds:histogram_quantile > 0.500",
         "for": "5m",
         "labels": {
            "severity": "warning"
         }
      },
      {
         "expr": "prometheus_http_request_duration_seconds:histogram_quantile > 1.000",
         "for": "5m",
         "labels": {
            "severity": "critical"
         }
      }
   ],
   "gauge": {
      "datasource": "$datasource",
      "options": {
         "maxValue": "1.5",
         "minValue": 0,
         "thresholds": [
            {
               "color": "green",
               "index": 0,
               "value": null
            },
            {
               "color": "#EAB839",
               "index": 1,
               "value": 0.5
            },
            {
               "color": "red",
               "index": 2,
               "value": 1
            }
         ],
         "valueOptions": {
            "decimals": null,
            "stat": "last",
            "unit": "dtdurations"
         }
      },
      "targets": [
         {
            "expr": "prometheus_http_request_duration_seconds:histogram_quantile{quantile=\"0.99\"}",
            "format": "time_series"
         }
      ],
      "title": "P99 Latency",
      "type": "gauge"
   },
   "recordingrule": {
      "expr": "histogram_quantile(0.99, sum(rate(prometheus_http_request_duration_seconds_bucket{namespace=\"default\",job=\"fooapp\"}[5m])) by (le))",
      "labels": {
         "quantile": "0.99"
      },
      "record": "prometheus_http_request_duration_seconds:histogram_quantile"
   }
}
